2 ½  cups all-purpose flour
1  teaspoon baking powder
1  teaspoon baking soda
2  teaspoons kosher salt
8  ounces butter, softened
1 ½  cups packed light brown sugar
¼  cup sugar
3  eggs
1  tablespoon vanilla extract
3  cups chopped bittersweet chocolate (chunks and shavings)
2  cups chopped walnuts (optional)